{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { NativeWindStyleSheet as _NativeWindStyleSheet } from \"nativewind\";\nimport { StyledComponent as _StyledComponent } from \"nativewind\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport React, { useEffect, useState } from \"react\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { LinearGradient } from \"expo-linear-gradient\";\nimport { storeColors } from \"../theme\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useIsFocused } from \"@react-navigation/native\";\nimport axios from \"axios\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport Request from \"../components/Request\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function BuyerDashBoard() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    showFull = _useState2[0],\n    setShowFull = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    data = _useState4[0],\n    setData = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    id = _useState6[0],\n    setId = _useState6[1];\n  var toggleShowFull = function toggleShowFull() {\n    setShowFull(!showFull);\n  };\n  var isFocused = useIsFocused();\n  var navigation = useNavigation();\n  axios.defaults.withCredentials = true;\n  function getValueFromAsyncStorage() {\n    return _getValueFromAsyncStorage.apply(this, arguments);\n  }\n  function _getValueFromAsyncStorage() {\n    _getValueFromAsyncStorage = _asyncToGenerator(function* () {\n      try {\n        var value = yield AsyncStorage.getItem(\"id\");\n        if (value !== null) {\n          setId(value);\n          console.log(value);\n          axios.get(\"/request/\" + value).then(function (response) {\n            setData(response.data);\n          }).catch(function (error) {\n            console.log(error);\n          });\n        } else {\n          yield AsyncStorage.clear();\n          navigation.navigate(\"Login\");\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    });\n    return _getValueFromAsyncStorage.apply(this, arguments);\n  }\n  useEffect(function () {\n    if (isFocused) {\n      getValueFromAsyncStorage();\n    }\n  }, [isFocused]);\n  if (!data) {\n    return _jsx(_StyledComponent, {\n      className: \"flex justify-center items-center w-full h-full z-40 absolute\",\n      component: View,\n      children: _jsx(ActivityIndicator, {\n        size: \"large\",\n        color: \"#0000ff\"\n      })\n    });\n  }\n  var calculateAverageStars = function calculateAverageStars(feedbackData, sender) {\n    var totalStars = 0;\n    var count = 0;\n    feedbackData.forEach(function (feedback) {\n      if (feedback.receiver === sender) {\n        totalStars += parseInt(feedback.stars);\n        count++;\n      }\n    });\n    var averageStars = count === 0 ? 0 : totalStars / count;\n    return averageStars;\n  };\n  return _jsx(_StyledComponent, {\n    colors: [\"rgba(58, 131, 244,0.4)\", \"rgba(9, 181, 211, 0.4)\"],\n    className: \"w-full flex-1\",\n    component: LinearGradient,\n    children: _jsx(SafeAreaView, {\n      children: _jsxs(_StyledComponent, {\n        className: \"container\",\n        component: View,\n        children: [_jsx(_StyledComponent, {\n          className: \"mt-3 space-y-4\",\n          component: View,\n          children: _jsx(_StyledComponent, {\n            style: {\n              color: storeColors.text\n            },\n            className: \"ml-4 text-3xl font-bold\",\n            component: Text,\n            children: \"My Requests\"\n          })\n        }), _jsxs(_StyledComponent, {\n          className: \"mt-3\",\n          component: View,\n          children: [_jsx(_StyledComponent, {\n            className: \"flex-row justify-between items-center mb-2\",\n            component: View\n          }), _jsx(ScrollView, {\n            showsVerticalScrollIndicator: false,\n            contentContainerStyle: {\n              paddingBottom: 200\n            },\n            children: data.map(function (item, index) {\n              var total = 0;\n              total = calculateAverageStars(item.buyerId.Feedback, item.buyerId._id);\n              return _jsx(Request, {\n                title: item.title,\n                desc: item.description,\n                type: item.rateType,\n                budget: item.price,\n                image: item.buyerId.image,\n                name: item.buyerId.name,\n                total: total\n              }, index);\n            })\n          })]\n        })]\n      })\n    })\n  });\n}\n_NativeWindStyleSheet.create({\n  styles: {\n    \"container\": {\n      \"width\": \"100%\"\n    },\n    \"container@0\": {\n      \"maxWidth\": 640\n    },\n    \"container@1\": {\n      \"maxWidth\": 768\n    },\n    \"container@2\": {\n      \"maxWidth\": 1024\n    },\n    \"container@3\": {\n      \"maxWidth\": 1280\n    },\n    \"container@4\": {\n      \"maxWidth\": 1536\n    },\n    \"absolute\": {\n      \"position\": \"absolute\"\n    },\n    \"z-40\": {\n      \"zIndex\": 40\n    },\n    \"mb-2\": {\n      \"marginBottom\": 8\n    },\n    \"ml-4\": {\n      \"marginLeft\": 16\n    },\n    \"mt-3\": {\n      \"marginTop\": 12\n    },\n    \"flex\": {\n      \"display\": \"flex\"\n    },\n    \"h-full\": {\n      \"height\": \"100%\"\n    },\n    \"w-full\": {\n      \"width\": \"100%\"\n    },\n    \"flex-1\": {\n      \"flexGrow\": 1,\n      \"flexShrink\": 1,\n      \"flexBasis\": \"0%\"\n    },\n    \"flex-row\": {\n      \"flexDirection\": \"row\"\n    },\n    \"items-center\": {\n      \"alignItems\": \"center\"\n    },\n    \"justify-center\": {\n      \"justifyContent\": \"center\"\n    },\n    \"justify-between\": {\n      \"justifyContent\": \"space-between\"\n    },\n    \"font-bold\": {\n      \"fontWeight\": \"700\"\n    },\n    \"space-y-4.children@0\": {\n      \"marginTop\": 16\n    },\n    \"text-3xl\": {\n      \"fontSize\": 30,\n      \"lineHeight\": 36\n    }\n  },\n  atRules: {\n    \"container\": [[[\"media\", \"(min-width: 640px)\"]], [[\"media\", \"(min-width: 768px)\"]], [[\"media\", \"(min-width: 1024px)\"]], [[\"media\", \"(min-width: 1280px)\"]], [[\"media\", \"(min-width: 1536px)\"]]],\n    \"space-y-4.children\": [[[\"selector\", \"(> *:not(:first-child))\"]]]\n  },\n  topics: {\n    \"container\": [\"width\"]\n  },\n  childClasses: {\n    \"space-y-4\": [\"space-y-4.children\"]\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","SafeAreaView","LinearGradient","storeColors","AsyncStorage","useIsFocused","axios","useNavigation","Request","jsx","_jsx","jsxs","_jsxs","BuyerDashBoard","_useState","_useState2","_slicedToArray","showFull","setShowFull","_useState3","_useState4","data","setData","_useState5","_useState6","id","setId","toggleShowFull","isFocused","navigation","defaults","withCredentials","getValueFromAsyncStorage","_getValueFromAsyncStorage","apply","arguments","_asyncToGenerator","value","getItem","console","log","get","then","response","catch","error","clear","navigate","_StyledComponent","className","component","View","children","ActivityIndicator","size","color","calculateAverageStars","feedbackData","sender","totalStars","count","forEach","feedback","receiver","parseInt","stars","averageStars","colors","style","text","Text","ScrollView","showsVerticalScrollIndicator","contentContainerStyle","paddingBottom","map","item","index","total","buyerId","Feedback","_id","title","desc","description","type","rateType","budget","price","image","name","_NativeWindStyleSheet","create","styles","atRules","topics","childClasses"],"sources":["D:/Project/FYP APP/Project/frontend/screens/BuyerDashBoard.js"],"sourcesContent":["import {\n  View,\n  Text,\n  ScrollView,\n  TouchableOpacity,\n  Image,\n  ActivityIndicator,\n} from \"react-native\";\nimport React, { useEffect, useState } from \"react\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { LinearGradient } from \"expo-linear-gradient\";\nimport { storeColors } from \"../theme\";\n\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useIsFocused } from \"@react-navigation/native\";\n\nimport axios from \"axios\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport Request from \"../components/Request\";\nexport default function BuyerDashBoard() {\n  // Function to clear all data in AsyncStorage\n\n  const [showFull, setShowFull] = useState(false);\n  const [data, setData] = useState(\"\");\n  const [id, setId] = useState(\"\");\n  const toggleShowFull = () => {\n    setShowFull(!showFull);\n  };\n  const isFocused = useIsFocused();\n\n  const navigation = useNavigation();\n  axios.defaults.withCredentials = true;\n  async function getValueFromAsyncStorage() {\n    try {\n      const value = await AsyncStorage.getItem(\"id\");\n      if (value !== null) {\n        setId(value);\n        console.log(value);\n        axios\n          .get(`/request/${value}`)\n          .then((response) => {\n            setData(response.data);\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      } else {\n        await AsyncStorage.clear();\n        navigation.navigate(\"Login\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  useEffect(() => {\n    if (isFocused) {\n      getValueFromAsyncStorage();\n    }\n  }, [isFocused]);\n  if (!data) {\n    return (\n      <View className=\"flex justify-center items-center w-full h-full z-40 absolute\">\n        <ActivityIndicator size=\"large\" color=\"#0000ff\" />\n      </View>\n    );\n  }\n  const calculateAverageStars = (feedbackData, sender) => {\n    let totalStars = 0;\n    let count = 0;\n\n    feedbackData.forEach((feedback) => {\n      if (feedback.receiver === sender) {\n        totalStars += parseInt(feedback.stars);\n        count++;\n      }\n    });\n\n    const averageStars = count === 0 ? 0 : totalStars / count;\n    return averageStars;\n  };\n  return (\n    <LinearGradient\n      colors={[\"rgba(58, 131, 244,0.4)\", \"rgba(9, 181, 211, 0.4)\"]}\n      className=\"w-full flex-1\"\n    >\n      <SafeAreaView>\n        <View className=\"container\">\n          {/* categories */}\n          <View className=\"mt-3 space-y-4\">\n            <Text\n              style={{ color: storeColors.text }}\n              className=\"ml-4 text-3xl font-bold\"\n            >\n              My Requests\n            </Text>\n          </View>\n\n          {/* top action games list */}\n          <View className=\"mt-3\">\n            <View className=\"flex-row justify-between items-center mb-2\"></View>\n            <ScrollView\n              showsVerticalScrollIndicator={false}\n              contentContainerStyle={{ paddingBottom: 200 }}\n            >\n              {data.map((item, index) => {\n                let total = 0;\n                total = calculateAverageStars(\n                  item.buyerId.Feedback,\n                  item.buyerId._id\n                );\n                return (\n                  <Request\n                    key={index}\n                    title={item.title}\n                    desc={item.description}\n                    type={item.rateType}\n                    budget={item.price}\n                    image={item.buyerId.image}\n                    name={item.buyerId.name}\n                    total={total}\n                  />\n                );\n              })}\n            </ScrollView>\n          </View>\n        </View>\n      </SafeAreaView>\n    </LinearGradient>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { NativeWindStyleSheet as _NativeWindStyleSheet } from \"nativewind\";\nimport { StyledComponent as _StyledComponent } from \"nativewind\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport React, { useEffect, useState } from \"react\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { LinearGradient } from \"expo-linear-gradient\";\nimport { storeColors } from \"../theme\";\nimport Request from \"../components/Request\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport axios from \"axios\";\nimport { useIsFocused, useNavigation } from \"@react-navigation/native\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function AdminRequest() {\n  var navigation = useNavigation();\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    id = _useState4[0],\n    setId = _useState4[1];\n  var isFocused = useIsFocused();\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    accountType = _useState6[0],\n    setAccountType = _useState6[1];\n  axios.defaults.withCredentials = true;\n  useEffect(function () {\n    if (isFocused) {\n      getValueFromAsyncStorage();\n    }\n  }, [isFocused]);\n  function getValueFromAsyncStorage() {\n    return _getValueFromAsyncStorage.apply(this, arguments);\n  }\n  function _getValueFromAsyncStorage() {\n    _getValueFromAsyncStorage = _asyncToGenerator(function* () {\n      try {\n        var value = yield AsyncStorage.getItem(\"id\");\n        var accountT = yield AsyncStorage.getItem(\"accountType\");\n        if (accountT != null) {\n          setAccountType(accountT);\n        }\n        if (value !== null) {\n          setId(value);\n          getData(value);\n        } else {\n          yield AsyncStorage.clear();\n          navigation.navigate(\"Login\");\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    });\n    return _getValueFromAsyncStorage.apply(this, arguments);\n  }\n  if (!data) {\n    return _jsx(_StyledComponent, {\n      className: \"flex justify-center items-center w-full h-full z-40 absolute\",\n      component: View,\n      children: _jsx(ActivityIndicator, {\n        size: \"large\",\n        color: \"#0000ff\"\n      })\n    });\n  }\n  function getData(value) {\n    axios.get(\"/request/\", {\n      params: {\n        id: value\n      }\n    }).then(function (response) {\n      setData(response.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n  var calculateAverageStars = function calculateAverageStars(feedbackData, sender) {\n    var totalStars = 0;\n    var count = 0;\n    feedbackData.forEach(function (feedback) {\n      if (feedback.receiver === sender) {\n        totalStars += parseInt(feedback.stars);\n        count++;\n      }\n    });\n    var averageStars = count === 0 ? 0 : totalStars / count;\n    return averageStars;\n  };\n  return _jsx(_StyledComponent, {\n    colors: [\"rgba(58, 131, 244,0.4)\", \"rgba(9, 181, 211, 0.4)\"],\n    className: \"w-full flex-1\",\n    component: LinearGradient,\n    children: _jsx(SafeAreaView, {\n      children: _jsxs(_StyledComponent, {\n        className: \"container\",\n        component: View,\n        children: [_jsx(_StyledComponent, {\n          className: \"mt-3 space-y-4\",\n          component: View,\n          children: _jsx(_StyledComponent, {\n            style: {\n              color: storeColors.text\n            },\n            className: \"ml-4 text-3xl font-bold\",\n            component: Text,\n            children: \"All Requests\"\n          })\n        }), _jsx(_StyledComponent, {\n          className: \"mt-3\",\n          component: View,\n          children: _jsx(ScrollView, {\n            showsVerticalScrollIndicator: false,\n            contentContainerStyle: {\n              paddingBottom: 150\n            },\n            children: data.map(function (item, index) {\n              var total = 0;\n              total = calculateAverageStars(item.buyerId.Feedback, item.buyerId._id);\n              return _jsx(Request, {\n                id: item._id,\n                title: item.title,\n                desc: item.description,\n                type: item.rateType,\n                budget: item.price,\n                image: item.buyerId.image,\n                accountType: accountType,\n                name: item.buyerId.name,\n                total: total,\n                onDatabaseUpdate: getValueFromAsyncStorage\n              }, index);\n            })\n          })\n        })]\n      })\n    })\n  });\n}\n_NativeWindStyleSheet.create({\n  styles: {\n    \"container\": {\n      \"width\": \"100%\"\n    },\n    \"container@0\": {\n      \"maxWidth\": 640\n    },\n    \"container@1\": {\n      \"maxWidth\": 768\n    },\n    \"container@2\": {\n      \"maxWidth\": 1024\n    },\n    \"container@3\": {\n      \"maxWidth\": 1280\n    },\n    \"container@4\": {\n      \"maxWidth\": 1536\n    },\n    \"absolute\": {\n      \"position\": \"absolute\"\n    },\n    \"z-40\": {\n      \"zIndex\": 40\n    },\n    \"ml-4\": {\n      \"marginLeft\": 16\n    },\n    \"mt-3\": {\n      \"marginTop\": 12\n    },\n    \"flex\": {\n      \"display\": \"flex\"\n    },\n    \"h-full\": {\n      \"height\": \"100%\"\n    },\n    \"w-full\": {\n      \"width\": \"100%\"\n    },\n    \"flex-1\": {\n      \"flexGrow\": 1,\n      \"flexShrink\": 1,\n      \"flexBasis\": \"0%\"\n    },\n    \"items-center\": {\n      \"alignItems\": \"center\"\n    },\n    \"justify-center\": {\n      \"justifyContent\": \"center\"\n    },\n    \"font-bold\": {\n      \"fontWeight\": \"700\"\n    },\n    \"space-y-4.children@0\": {\n      \"marginTop\": 16\n    },\n    \"text-3xl\": {\n      \"fontSize\": 30,\n      \"lineHeight\": 36\n    }\n  },\n  atRules: {\n    \"container\": [[[\"media\", \"(min-width: 640px)\"]], [[\"media\", \"(min-width: 768px)\"]], [[\"media\", \"(min-width: 1024px)\"]], [[\"media\", \"(min-width: 1280px)\"]], [[\"media\", \"(min-width: 1536px)\"]]],\n    \"space-y-4.children\": [[[\"selector\", \"(> *:not(:first-child))\"]]]\n  },\n  topics: {\n    \"container\": [\"width\"]\n  },\n  childClasses: {\n    \"space-y-4\": [\"space-y-4.children\"]\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","SafeAreaView","LinearGradient","storeColors","Request","AsyncStorage","axios","useIsFocused","useNavigation","jsx","_jsx","jsxs","_jsxs","AdminRequest","navigation","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","id","setId","isFocused","_useState5","_useState6","accountType","setAccountType","defaults","withCredentials","getValueFromAsyncStorage","_getValueFromAsyncStorage","apply","arguments","_asyncToGenerator","value","getItem","accountT","getData","clear","navigate","error","console","log","_StyledComponent","className","component","View","children","ActivityIndicator","size","color","get","params","then","response","catch","calculateAverageStars","feedbackData","sender","totalStars","count","forEach","feedback","receiver","parseInt","stars","averageStars","colors","style","text","Text","ScrollView","showsVerticalScrollIndicator","contentContainerStyle","paddingBottom","map","item","index","total","buyerId","Feedback","_id","title","desc","description","type","rateType","budget","price","image","name","onDatabaseUpdate","_NativeWindStyleSheet","create","styles","atRules","topics","childClasses"],"sources":["D:/Project/FYP APP/Project/frontend/screens/AdminRequest.js"],"sourcesContent":["import { View, Text, ScrollView, ActivityIndicator } from \"react-native\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { SafeAreaView } from \"react-native-safe-area-context\";\r\nimport { LinearGradient } from \"expo-linear-gradient\";\r\nimport { storeColors } from \"../theme\";\r\nimport Request from \"../components/Request\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport axios from \"axios\";\r\nimport { useIsFocused, useNavigation } from \"@react-navigation/native\";\r\nexport default function AdminRequest() {\r\n  const navigation = useNavigation();\r\n  const [data, setData] = useState(\"\");\r\n  const [id, setId] = useState(\"\");\r\n  const isFocused = useIsFocused();\r\n  const [accountType, setAccountType] = useState(\"\");\r\n  axios.defaults.withCredentials = true;\r\n  useEffect(() => {\r\n    if (isFocused) {\r\n      getValueFromAsyncStorage();\r\n    }\r\n  }, [isFocused]);\r\n  async function getValueFromAsyncStorage() {\r\n    try {\r\n      const value = await AsyncStorage.getItem(\"id\");\r\n      const accountT = await AsyncStorage.getItem(\"accountType\");\r\n      if (accountT != null) {\r\n        setAccountType(accountT);\r\n      }\r\n      if (value !== null) {\r\n        setId(value);\r\n        getData(value);\r\n      } else {\r\n        await AsyncStorage.clear();\r\n        navigation.navigate(\"Login\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  if (!data) {\r\n    return (\r\n      <View className=\"flex justify-center items-center w-full h-full z-40 absolute\">\r\n        <ActivityIndicator size=\"large\" color=\"#0000ff\" />\r\n      </View>\r\n    );\r\n  }\r\n  function getData(value) {\r\n    axios\r\n      .get(`/request/`, {\r\n        params: {\r\n          id: value,\r\n        },\r\n      })\r\n      .then((response) => {\r\n        setData(response.data);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }\r\n  const calculateAverageStars = (feedbackData, sender) => {\r\n    let totalStars = 0;\r\n    let count = 0;\r\n\r\n    feedbackData.forEach((feedback) => {\r\n      if (feedback.receiver === sender) {\r\n        totalStars += parseInt(feedback.stars);\r\n        count++;\r\n      }\r\n    });\r\n\r\n    const averageStars = count === 0 ? 0 : totalStars / count;\r\n    return averageStars;\r\n  };\r\n  return (\r\n    <LinearGradient\r\n      colors={[\"rgba(58, 131, 244,0.4)\", \"rgba(9, 181, 211, 0.4)\"]}\r\n      className=\"w-full flex-1\"\r\n    >\r\n      <SafeAreaView>\r\n        <View className=\"container\">\r\n          <View className=\"mt-3 space-y-4\">\r\n            <Text\r\n              style={{ color: storeColors.text }}\r\n              className=\"ml-4 text-3xl font-bold\"\r\n            >\r\n              All Requests\r\n            </Text>\r\n          </View>\r\n          <View className=\"mt-3\">\r\n            <ScrollView\r\n              showsVerticalScrollIndicator={false}\r\n              contentContainerStyle={{ paddingBottom: 150 }}\r\n            >\r\n              {data.map((item, index) => {\r\n                let total = 0;\r\n                total = calculateAverageStars(\r\n                  item.buyerId.Feedback,\r\n                  item.buyerId._id\r\n                );\r\n                return (\r\n                  <Request\r\n                    key={index}\r\n                    id={item._id}\r\n                    title={item.title}\r\n                    desc={item.description}\r\n                    type={item.rateType}\r\n                    budget={item.price}\r\n                    image={item.buyerId.image}\r\n                    accountType={accountType}\r\n                    name={item.buyerId.name}\r\n                    total={total}\r\n                    onDatabaseUpdate={getValueFromAsyncStorage}\r\n                  />\r\n                );\r\n              })}\r\n            </ScrollView>\r\n          </View>\r\n        </View>\r\n      </SafeAreaView>\r\n    </LinearGradient>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}